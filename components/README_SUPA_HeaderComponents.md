ï¼ˆSupabaseå¯¾å¿œæ¸ˆã¿ãƒ˜ãƒƒãƒ€ãƒ¼ç¾¤ã®èª¬æ˜ï¼‰

md
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
# âœ… READMEï¼šSupabaseå¯¾å¿œ ãƒ˜ãƒƒãƒ€ãƒ¼ç¾¤

## ğŸ¯ å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

components/ â”œâ”€â”€ HeaderUser.js â”œâ”€â”€ HeaderAdmin.js â”œâ”€â”€ HeaderAgency.js â”œâ”€â”€ HeaderClient.js â”œâ”€â”€ HeaderPublic.js

markdown
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹

## ğŸ”§ ä¸»ãªå¯¾å¿œå†…å®¹

å„ãƒ­ãƒ¼ãƒ«ï¼ˆuser / admin / agency / clientï¼‰ã”ã¨ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ Supabaseå¯¾å¿œã«çµ±ä¸€ã€‚

### âœ… Firebase â†’ Supabase ã®å·®ã—æ›¿ãˆ
- Firebaseã® `signOut(firebaseAuth)` ã‚’å‰Šé™¤
- Supabaseã® `useAuth().logout()` ã«çµ±ä¸€
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç ´æ£„å‡¦ç†ã¯ `router.replace("/login?logout=1")` ã§å…±é€šå¯¾å¿œ
- `HeaderClient` ã¨ `HeaderPublic` ã¯å…ƒã€… Firebase éä¾å­˜ â†’ å¤‰æ›´ãªã—

## ğŸ’¡ åŠ¹æœã¨çµ±ä¸€æ–¹é‡

| é …ç›® | å†…å®¹ |
|------|------|
| ä¿å®ˆæ€§ | ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å…±é€šé–¢æ•°ï¼ˆuseAuthï¼‰ã«é›†ç´„ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | Supabase JWTã‚»ãƒƒã‚·ãƒ§ãƒ³ã«çµ±ä¸€ã•ã‚Œã€middlewareåˆ¶å¾¡ã¨é€£æºã—ã‚„ã™ã„ |
| æ‹¡å¼µæ€§ | ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ãŸUIãƒ»å‹•ç·šåˆ¶å¾¡ã®æ‹¡å¼µãŒå®¹æ˜“ |
| UI | æ—¢å­˜ã®ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ ã¯ç¶­æŒã—ã€å½±éŸ¿ãªã— |

## âœ… å®Œäº†æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆSupabaseæº–æ‹ ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ«å | Firebaseä¾å­˜é™¤å» | logouté–¢æ•° | ã‚³ãƒ¡ãƒ³ãƒˆ |
|------------|------------------|-------------|----------|
| HeaderUser.js | âœ… å®Œå…¨å¯¾å¿œæ¸ˆ | useAuth().logout | Supabaseçµ±ä¸€ |
| HeaderAdmin.js | âœ… å®Œå…¨å¯¾å¿œæ¸ˆ | useAuth().logout | Supabaseçµ±ä¸€ |
| HeaderAgency.js | âœ… å®Œå…¨å¯¾å¿œæ¸ˆ | useAuth().logout | Supabaseçµ±ä¸€ |
| HeaderClient.js | âœ… å…ƒã‹ã‚‰éä¾å­˜ | useAuth().logout | åˆæœŸã‹ã‚‰ Supabaseæ§‹æˆ |
| HeaderPublic.js | âœ… éä¾å­˜ | - | UIè¡¨ç¤ºã®ã¿ã®ãŸã‚å¤‰æ›´ä¸è¦ |

## ğŸ” ä»Šå¾Œã®å¯¾å¿œæ¤œè¨

- middleware.ts ã«ã‚ˆã‚‹ role-based redirect ã®çµ±ä¸€
- logout å‡¦ç†æ™‚ã®æ“ä½œãƒ­ã‚°ï¼ˆSQLï¼šlogout_logsï¼‰ã¨ã®é€£æº
- RLSæ´»ç”¨ã«ã‚ˆã‚‹ç”»é¢ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å¼·åŒ–